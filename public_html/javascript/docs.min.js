const Kumbia={publicPath:null,plugin:[],cConfirm:function(t){const e=t.target;confirm(e.getAttribute("data-msg"))||t.preventDefault()},cFx:function(t){return function(e){e.preventDefault();const n=e.target,c=document.getElementById(n.getAttribute("data-to"));c&&(c.style.display="toggle"===t?"none"===c.style.display?"block":"none":t)}},cRemote:function(t){t.preventDefault();const e=t.target,n=document.querySelector(e.getAttribute("data-ajax"));console.log(e.href),n&&fetch(e.href,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(t=>t.text()).then(t=>{n.innerHTML=t})},cRemoteConfirm:function(t){const e=t.target;confirm(e.getAttribute("data-msg"))&&Kumbia.cRemote(t)},cFRemote:function(t){t.preventDefault();const e=t.target,n=e.querySelector("[type=submit]");n.disabled=!0;const c=e.getAttribute("action"),a=e.getAttribute("data-to"),i=document.getElementById(a);i&&fetch(c,{method:"POST",body:new FormData(e)}).then(t=>t.text()).then(t=>{i.style.display="none",i.innerHTML=t,i.style.display="block",n.disabled=!1})},cUpdaterSelect:function(t){const e=t.target,n=e.getAttribute("data-update"),c=document.getElementById(n);if(c){c.innerHTML="";const t=e.getAttribute("data-url");fetch(t+"?id="+e.value).then(t=>t.json()).then(t=>{for(const e in t){const n=document.createElement("option");n.text=t[e],n.value=e,c.appendChild(n)}})}},bind:function(){document.body.addEventListener("click",function(t){const e=t.target;e.matches("a.js-confirm, input.js-confirm")?Kumbia.cConfirm(t):e.matches("a[data-ajax]")?Kumbia.cRemote(t):e.matches("a.js-remote-confirm")?Kumbia.cRemoteConfirm(t):e.matches(".js-show")?Kumbia.cFx("block")(t):e.matches(".js-hide")?Kumbia.cFx("none")(t):e.matches(".js-toggle")?Kumbia.cFx("toggle")(t):e.matches(".js-fade-in")?Kumbia.cFx("block")(t):e.matches(".js-fade-out")&&Kumbia.cFx("none")(t)}),document.body.addEventListener("submit",function(t){t.target.matches("form.js-remote")&&Kumbia.cFRemote(t)}),document.body.addEventListener("change",function(t){t.target.matches("select.js-remote")&&Kumbia.cUpdaterSelect(t)})},bindDatePicker:function(){const t=document.querySelectorAll("input.js-datepicker"),e=function(){t.forEach(t=>{const e={monthSelector:!0,yearSelector:!0},n=t.getAttribute("min");null!==n&&(e.dateMin=n.split("-"));const c=t.getAttribute("max");null!==c&&(e.dateMax=c.split("-")),t.pickadate(e)})};if("undefined"!=typeof pickadate)return e();const n=document.querySelector("head");n.innerHTML+='<link href="'+Kumbia.publicPath+'css/pickadate.css" rel="stylesheet"/>',fetch(Kumbia.publicPath+"javascript/jquery/pickadate.js").then(t=>t.text()).then(t=>{e()})},initialize:function(){const t=document.currentScript;if(t){const e=t.src;this.publicPath=e.slice(0,e.lastIndexOf("javascript/"))}Kumbia.bind()}};Kumbia.initialize();