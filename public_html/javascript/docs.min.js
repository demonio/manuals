const Kumbia={publicPath:null,plugin:[],cConfirm:function(t){const e=t.target;confirm(e.getAttribute("data-msg"))||t.preventDefault()},cFx:function(t){return function(e){e.preventDefault();const n=e.target,a=document.getElementById(n.getAttribute("data-to"));a&&(a.style.display="toggle"===t?"none"===a.style.display?"block":"none":t)}},cRemote:function(t){t.preventDefault();const e=t.target,n=e.getAttribute("data-ajax");console.log(e.href),history.pushState({url:e.href,container:n},"",e.href),n&&Kumbia.go(e.href,n)},go:function(t,e){const n=document.querySelector(e);fetch(t,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(t=>t.text()).then(t=>{n.innerHTML=t})},popstate:function(){window.addEventListener("popstate",function(t){t.state&&t.state.url&&Kumbia.go(t.state.url,t.state.container)})},cRemoteConfirm:function(t){const e=t.target;confirm(e.getAttribute("data-msg"))&&Kumbia.cRemote(t)},cFRemote:function(t){t.preventDefault();const e=t.target,n=e.querySelector("[type=submit]");n.disabled=!0;const a=e.getAttribute("action"),o=e.getAttribute("data-to"),c=document.getElementById(o);c&&fetch(a,{method:"POST",body:new FormData(e)}).then(t=>t.text()).then(t=>{c.style.display="none",c.innerHTML=t,c.style.display="block",n.disabled=!1})},cUpdaterSelect:function(t){const e=t.target,n=e.getAttribute("data-update"),a=document.getElementById(n);if(a){a.innerHTML="";const t=e.getAttribute("data-url");fetch(t+"?id="+e.value).then(t=>t.json()).then(t=>{for(const e in t){const n=document.createElement("option");n.text=t[e],n.value=e,a.appendChild(n)}})}},bind:function(){document.body.addEventListener("click",function(t){const e=t.target;e.matches("a.js-confirm, input.js-confirm")?Kumbia.cConfirm(t):e.matches("a[data-ajax]")?Kumbia.cRemote(t):e.matches("a.js-remote-confirm")?Kumbia.cRemoteConfirm(t):e.matches(".js-show")?Kumbia.cFx("block")(t):e.matches(".js-hide")?Kumbia.cFx("none")(t):e.matches(".js-toggle")?Kumbia.cFx("toggle")(t):e.matches(".js-fade-in")?Kumbia.cFx("block")(t):e.matches(".js-fade-out")&&Kumbia.cFx("none")(t)}),document.body.addEventListener("submit",function(t){t.target.matches("form.js-remote")&&Kumbia.cFRemote(t)}),document.body.addEventListener("change",function(t){t.target.matches("select.js-remote")&&Kumbia.cUpdaterSelect(t)})},initialize:function(){const t=document.currentScript;if(t){const e=t.src;this.publicPath=e.slice(0,e.lastIndexOf("javascript/"))}Kumbia.bind(),Kumbia.popstate()}};Kumbia.initialize();